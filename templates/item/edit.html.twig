{% extends 'base.html.twig' %}

{% block title %}Edit Item{% endblock %}

{% block body %}

{% block addStyleSheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('createCss') }}
{% endblock %}

    <h1>Edit Item</h1>
    <div class="container text-left" >
        <div class="mt-3 p-3 border border-secondary rounded bg-light shadow mb-5 bg-white ">
    {{ include('item/_form.html.twig', {'button_label': 'Confirmar'}) }}

        <a href="{{ path('item_index') }}" class="btn btn-primary">Volver</a>
        </div></div>

    {#{% block script %}
        <script>

            /*var $padre = $('#item_padre');
            // When sport gets selected ...
            
            $padre.change(function() {
                let select = document.getElementById('item_dependencias');
                while (select.firstChild) {
                    select.removeChild(select.firstChild);
                }
                // ... retrieve the corresponding form.
                var $form = $(this).closest('form');
                // Simulate form data, but only include the selected sport value.
                var data = {};
                data[$padre.attr('padre')] = $padre.val();
                var url="{{ path('item_ajax') }}";
                var parametros = {'id' : (this.value)};
                // Submit data via AJAX to the form's action path.
                $.post(
                    url,
                    parametros,
                    //url = "/item/"+parametro+"/itemAjax", // esto anda
                    // url = "{{ path('item_ajax', {'id': 'parametro'}) }}",
                    // url = url.replace('parametro', parametro),
                )
                .done( (data) => {
                    //console.log(data);
                    let select = document.getElementById('item_dependencias');
                    const obj=JSON.parse(JSON.stringify(data));//probar con pasarle el objeto completoÂ¿?
                    // console.log(obj.nombre);
                    obj.forEach(unaData => {
                        let opcion1=document.createElement("option");
                        opcion1.setAttribute("value",unaData.id);
                        console.log("value: ",unaData.id);
                        let texto=document.createTextNode(unaData.nombre);
                        opcion1.appendChild(texto);
                        select.appendChild(opcion1);
                    });
                });
            });*/

        </script>
    {% endblock  %}#}
{% endblock %}